<div class="row-fluid">
	<div class="span12">
		<div class="widget">
			<div class="widget-header">
				<div class="title" id="complaints_per_employee">
					Subjects Directory
					<span class="mini-title">
						<%= 'All Subjects Directory' if params[:controller] == 'subjects' && params[:tab] == 'all' %>
						<%= 'Enrolled Subjects Directory' if params[:controller] == 'subjects' && params[:tab] == 'enrolled' %> 
					</span>
				</div>
			</div>


			<div class="widget-body">
				<div id="dt_example" class="example_alt_pagination">
					<% if params[:controller] == 'subjects' && params[:tab] == 'all' %>
					<%= form_tag assign_advisors_subjects_path, method: :get do %>
					<table class="table table-condensed table-striped table-hover table-bordered pull-left" id="subjects">

						<thead>
							<tr>
								<th></th>
								<th>Subject Code</th>
								<th>Subject Title</th>
								<th>Advisor in Charge</th>
							</tr>
						</thead>
						<tbody>
							<% @subjects.each do |subject| %>
							<tr>
								<td><%= check_box_tag 'subject_ids[]', subject.id %></td>
								<td><%= subject.subjectCode %></td>
								<td><%= subject.subject_title %></td>
								<% if subject.advisor_id.nil? %>
								<td>no advisor assigned yet</td>
								<% else %>
								<td><%= subject.advisor.full_name %></td>
								<% end %>
							</tr>
							<% end %>
						</tbody>
					</table>
					<%= submit_tag 'Assign Advisor(s)' %>
			      <% end %>
						<% elsif params[:controller] == 'subjects' && params[:tab] == 'assigned' %>
						<table class="table table-condensed table-striped table-hover table-bordered pull-left" id="subjects">

							<thead>
								<tr>
									<th>Subject Code</th>
									<th>Subject Title</th>
									<th>Total Complaints</th>
								</tr>
							</thead>
							<tbody>
								<% @subjects.each do |subject| %>
								<tr>
									<td><%= subject.subjectCode %></td>
									<td><%= subject.subject_title %></td>
									<td></td>
								</tr>
								<% end %>
							</tbody>
						</table>
					<% elsif params[:controller] == 'subjects' && params[:tab] == 'enrolled' %>
					<table class="table table-condensed table-striped table-hover table-bordered pull-left" id="subjects">

						<thead>
							<tr>
								<th>Subject Code</th>
								<th>Subject Title</th>
								<th>Make a Complaint</th>
							</tr>
						</thead>
						<tbody>
							<% @subjects.each do |subject| %>
							<tr>
								<td><%= subject.subjectCode %></td>
								<td><%= subject.subject_title %></td>
								<td><a href="<%= new_subject_ticket_path(subject) %>" class="btn">Report Subject</a></td>
							</tr>
							<% end %>
						</tbody>
					</table>
					<% end %>
					<div class="clearfix">
					</div>
				</div>
			</div>		
		</div>
	</div>
</div>
<script>
$('#subjects').dataTable({
	"sPaginationType": "full_numbers"
});
</script>